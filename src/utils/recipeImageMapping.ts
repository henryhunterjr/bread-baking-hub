// Updated recipeImageMapping.ts with working WordPress URLs
export const recipeImageMapping: Record<string, string> = {
  // FOCACCIA RECIPES - Use focaccia images
  "lemon-thyme-focaccia": "https://bakinggreatbread.blog/wp-content/uploads/2023/08/img_5045.jpg",
  "olive-rosemary-focaccia": "https://bakinggreatbread.blog/wp-content/uploads/2024/10/img_8036-1.jpg",
  "rosemary-garlic-focaccia": "https://bakinggreatbread.blog/wp-content/uploads/2024/10/img_8036-1.jpg",
  "spring-herb-focaccia": "https://bakinggreatbread.blog/wp-content/uploads/2023/08/img_5045.jpg",
  
  // FLATBREAD/GRILLED - Use appropriate bread images  
  "grilled-flatbread-with-toppings": "https://bakinggreatbread.blog/wp-content/uploads/2023/08/img_5045.jpg",
  
  // CIABATTA - Use ciabatta image
  "rustic-italian-ciabatta": "https://bakinggreatbread.blog/wp-content/uploads/2025/01/OIP-4-1.webp",
  
  // JAPANESE MILK BREAD - Use milk bread image
  "japanese-milk-bread": "https://bakinggreatbread.blog/wp-content/uploads/2024/11/IMG_8582.webp",
  
  // SOURDOUGH BREADS - Use sourdough images
  "basic-sourdough-loaf": "https://bakinggreatbread.blog/wp-content/uploads/2024/01/Knead-to-Know-Sourdough-Basics.jpg",
  "apricot-almond-sourdough": "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_2890.jpg",
  "cherry-vanilla-sourdough": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/IMG_7860.jpg",
  "light-sourdough-batard": "https://bakinggreatbread.blog/wp-content/uploads/2025/04/IMG_1447.jpeg",
  "nutty-whole-grain-sourdough": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/IMG_4433_Original-1.jpg",
  "pumpkin-sourdough": "https://bakinggreatbread.blog/wp-content/uploads/2023/09/img_6460-1.jpg",
  "roasted-garlic-rosemary-sourdough": "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_2890.jpg",
  "rye-sourdough-caraway": "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_2890.jpg",
  "super-seeded-sourdough-loaf": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/IMG_4433_Original-1.jpg",
  
  // SOURDOUGH ITEMS - Bagels, pretzels, etc.
  "sourdough-bagels": "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_2890.jpg",
  "sourdough-pretzels": "https://bakinggreatbread.blog/wp-content/uploads/2024/02/th-14.jpeg",
  "sourdough-discard-crackers": "https://bakinggreatbread.blog/wp-content/uploads/2024/01/th-10-1.jpeg",
  "sourdough-discard-pancakes": "https://bakinggreatbread.blog/wp-content/uploads/2024/01/th-10-1.jpeg",
  "sourdough-english-muffins": "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_2890.jpg",
  "sourdough-pizza-dough": "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_2890.jpg",
  
  // WHITE/SANDWICH BREADS
  "classic-white-sandwich-bread": "https://bakinggreatbread.blog/wp-content/uploads/2023/10/20200930_191335_compress18.webp",
  "henrys-crusty-white-bread": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/IMG_1158_Original-1200x1200-1.webp",
  "no-knead-white-bread": "https://bakinggreatbread.blog/wp-content/uploads/2023/10/20200930_191335_compress18.webp",
  
  // SPECIALTY BREADS
  "multigrain-sandwich-loaf": "https://bakinggreatbread.blog/wp-content/uploads/2024/02/multigrain-flaxseed-bread-1-1.jpg",
  "wildflower-honey-wheat-bread": "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_3608-1.jpg",
  "honey-oatmeal-bread": "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_3608-1.jpg",
  "millet-flaxseed-bread": "https://bakinggreatbread.blog/wp-content/uploads/2024/02/multigrain-flaxseed-bread-1-1.jpg",
  "pumpernickel-bread": "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_2890.jpg",
  
  // WALNUT/NUT BREADS
  "cranberry-walnut-loaf": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/IMG_4433_Original-1.jpg",
  "fig-walnut-sourdough": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/IMG_4433_Original-1.jpg",
  "maple-walnut-sticky-buns": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/IMG_4433_Original-1.jpg",
  
  // SWEET BREADS/DESSERTS  
  "apple-cider-bread": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/th-8.jpeg",
  "spiced-chocolate-bread": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/th-8.jpeg",
  "spiced-holiday-bread": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/th-8.jpeg",
  "spiced-pear-bread": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/th-8.jpeg",
  "zucchini-bread": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/th-8.jpeg",
  "stollen": "https://bakinggreatbread.blog/wp-content/uploads/2023/10/stollen-1500-58a70c393df78c345b67af14.jpg",
  "mocha-angel-pie": "https://bakinggreatbread.blog/wp-content/uploads/2023/10/d42ac36a6091c134254580b5fdc6fbdb.jpg",
  
  // SCONES
  "blueberry-lemon-scones": "https://bakinggreatbread.blog/wp-content/uploads/2025/05/495571415_10235709364576315_7915392766389904392_n.jpg",
  
  // ROLLS/BUNS
  "brioche-hamburger-buns": "https://bakinggreatbread.blog/wp-content/uploads/2024/08/DSC07597.webp",
  "buttermilk-potato-rolls": "https://bakinggreatbread.blog/wp-content/uploads/2023/10/IMG_7806.png",
  "hot-cross-buns": "https://bakinggreatbread.blog/wp-content/uploads/2024/01/2A65D6F2-40DC-4045-83B6-B4C0A1F82697_Original.jpg",
  "hot-dog-buns": "https://bakinggreatbread.blog/wp-content/uploads/2024/01/2A65D6F2-40DC-4045-83B6-B4C0A1F82697_Original.jpg",
  "spring-herb-rolls": "https://bakinggreatbread.blog/wp-content/uploads/2023/10/IMG_7806.png",
  
  // SPECIALTY/SAVORY
  "cheddar-chive-biscuits": "https://bakinggreatbread.blog/wp-content/uploads/2024/08/IMG_0369.jpg",
  "jalapeno-cheddar-cornbread": "https://bakinggreatbread.blog/wp-content/uploads/2024/11/cornbread3.webp",
  "caramelized-onion-gruyere-fougasse": "https://bakinggreatbread.blog/wp-content/uploads/2025/02/475992172_1777767306347357_602858855922001730_n.jpg",
  "sun-dried-tomato-feta-bread": "/lovable-uploads/938a48a4-da57-4b7f-a31f-716a0493f585.png",
  
  // HOLIDAY BREADS
  "hanukkah-challah": "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_3677.jpg",
  "easter-paska": "https://bakinggreatbread.blog/wp-content/uploads/2025/04/IMG_6856.jpg"
};

// Fallback images:
const fallbackImages = [
  "https://bakinggreatbread.blog/wp-content/uploads/2018/05/fd2ec99d-a06b-4f87-b71f-63c8542c458d.jpeg",
  "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_2890.jpg",
  "https://bakinggreatbread.blog/wp-content/uploads/2018/07/img_6393.jpg",
  "https://bakinggreatbread.blog/wp-content/uploads/2022/08/sourdough-starter-risen-in-a-jar.jpg"
];

export function getRecipeImage(slug: string, imageUrl?: string | null): string {
  console.log('üîç getRecipeImage DEBUG:', { slug, imageUrl });
  
  // Skip staging URLs - prioritize mapping over broken staging links
  const isStagingUrl = imageUrl && imageUrl.includes('wpcomstaging.com');
  
  // Check our mapping first (for staging URLs) or if no imageUrl
  if (isStagingUrl || !imageUrl || imageUrl.trim() === "") {
    if (recipeImageMapping[slug]) {
      console.log('‚úÖ Using mapping URL for', slug, ':', recipeImageMapping[slug]);
      return recipeImageMapping[slug];
    }
  }
  
  // Use direct image_url only if it's not a staging URL
  if (imageUrl && imageUrl.trim() !== "" && !isStagingUrl) {
    console.log('‚úÖ Using direct URL for', slug, ':', imageUrl);
    return imageUrl;
  }
  
  // Finally use a fallback image
  const fallbackIndex = Math.abs(slug.split('').reduce((a, b) => a + b.charCodeAt(0), 0)) % fallbackImages.length;
  const fallbackUrl = fallbackImages[fallbackIndex];
  console.log('‚ö†Ô∏è Using fallback URL for', slug, ':', fallbackUrl);
  return fallbackUrl;
}