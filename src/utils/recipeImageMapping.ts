// Updated recipeImageMapping.ts with working WordPress URLs

export const recipeImageMapping: Record<string, string> = {
  // FOCACCIA RECIPES - Use focaccia images
  "lemon-thyme-focaccia": "https://bakinggreatbread.blog/wp-content/uploads/2023/08/img_5045.jpg",
  "olive-rosemary-focaccia": "/lovable-uploads/cf118c0c-51d5-44b8-a355-8e2bcb89da47.png",
  "rosemary-garlic-focaccia": "/lovable-uploads/1b1a84b9-ba95-4edc-8e1d-e27d3506d425.png",
  "spring-herb-focaccia": "/lovable-uploads/76ed96bc-9d9f-4bf6-9a42-103bd5378240.png",
  
  // FLATBREAD/GRILLED - Use appropriate bread images  
  "grilled-flatbread-with-toppings": "/lovable-uploads/fa994734-07ee-4234-aa90-3e73a78f6cdd.png",
  
  // CIABATTA - Use ciabatta image
  "rustic-italian-ciabatta": "https://bakinggreatbread.blog/wp-content/uploads/2025/01/OIP-4-1.webp",
  
  // JAPANESE MILK BREAD - Use milk bread image
  "japanese-milk-bread": "https://bakinggreatbread.blog/wp-content/uploads/2024/11/IMG_8582.webp",
  
  // SOURDOUGH BREADS - Use sourdough images
  "basic-sourdough-loaf": "/lovable-uploads/3cab5e17-c744-43cc-8db7-b229b06d7b04.png",
  "henrys-whole-wheat-sourdough-recipe": "/lovable-uploads/e0a7bf8b-0956-4177-9569-5c388a442be1.png",
  "apricot-almond-sourdough": "/lovable-uploads/bb7c5e63-3ec6-4f3e-9fda-52740b5db7e7.png",
  "cherry-vanilla-sourdough": "/lovable-uploads/8c576450-cbf8-47f0-a751-48a4efc4d7d3.png",
  "light-sourdough-batard": "/lovable-uploads/fd01d2cb-fc25-444f-b935-8125023ad76e.png",
  "nutty-whole-grain-sourdough": "/lovable-uploads/876d257b-9b3a-48fe-a953-c45fc81a8485.png",
  "pumpkin-sourdough": "https://bakinggreatbread.blog/wp-content/uploads/2023/09/img_6460-1.jpg",
  "roasted-garlic-rosemary-sourdough": "/lovable-uploads/2c4b7075-6963-4ba1-bc31-e2129773be19.png",
  "rye-sourdough-caraway": "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_2890.jpg",
  "super-seeded-sourdough-loaf": "/lovable-uploads/06971d11-8ec2-417f-8518-8e179926a6f8.png",
  
  // SOURDOUGH ITEMS - Bagels, pretzels, etc.
  "sourdough-bagels": "/lovable-uploads/b1f81606-ae96-4033-b3ad-33d3b9cebdd3.png",
  "sourdough-pretzels": "https://bakinggreatbread.blog/wp-content/uploads/2024/02/th-14.jpeg",
  "sourdough-discard-crackers": "/lovable-uploads/9e4eccd7-3e1c-4647-ad75-0ccaafef3446.png",
  "sourdough-discard-pancakes": "/lovable-uploads/fbe1cde7-a245-4bdf-a3a8-41b97e70baa1.png",
  "sourdough-english-muffins": "/lovable-uploads/5ea300ed-c0be-4247-bba1-b8969f51db23.png",
  "sourdough-pizza-dough": "/lovable-uploads/e8ee634e-98ff-49ea-8716-6eb44d89fd24.png",
  
  // WHITE/SANDWICH BREADS
  "classic-white-sandwich-bread": "https://bakinggreatbread.blog/wp-content/uploads/2023/10/20200930_191335_compress18.webp",
  "henrys-crusty-white-bread": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/IMG_1158_Original-1200x1200-1.webp",
  "no-knead-white-bread": "/lovable-uploads/d59937f5-fe00-49e8-8bf2-603d0d3e366e.png",
  
  // SPECIALTY BREADS
  "multigrain-sandwich-loaf": "/lovable-uploads/6d60ec6e-fa92-4e9e-a544-81b4960cc757.png",
  "wildflower-honey-wheat-bread": "/lovable-uploads/416ed08f-f6a2-455a-a3fd-44e161a2a282.png",
  "honey-oatmeal-bread": "/lovable-uploads/d918db3e-65b1-427a-85e4-4d14a0789195.png",
  "millet-flaxseed-bread": "/lovable-uploads/dc540058-4ef3-4110-88e5-71c432332f13.png",
  "pumpernickel-bread": "/lovable-uploads/4bee7f23-8c3c-41a2-91aa-a39b05379ff7.png",
  
  // WALNUT/NUT BREADS
  "cranberry-walnut-loaf": "https://bakinggreatbread.blog/wp-content/uploads/2023/11/IMG_4433_Original-1.jpg",
  "fig-walnut-sourdough": "/lovable-uploads/62cdefc6-8b59-4f26-8f61-c7466fdf4fbe.png",
  "maple-walnut-sticky-buns": "/lovable-uploads/bcc3e53d-83a5-4975-b0a2-e75370e9e9c7.png",
  
  // SWEET BREADS/DESSERTS  
  "apple-cider-bread": "/lovable-uploads/1e7a656f-cd0f-4366-bd61-40b7705681a7.png",
  "spiced-chocolate-bread": "/lovable-uploads/aa77f34a-2501-4498-889f-ef88dc734116.png",
  "spiced-holiday-bread": "/lovable-uploads/bddd0565-6c16-460c-a13b-729cf16e4930.png",
  "spiced-pear-bread": "/lovable-uploads/63e9053f-5c3c-4ee7-9f9e-61e590b4cfac.png",
  "zucchini-bread": "/lovable-uploads/a11398e3-4f1b-4dc6-b30e-c9aa076af2cb.png",
  "stollen": "https://bakinggreatbread.blog/wp-content/uploads/2023/10/stollen-1500-58a70c393df78c345b67af14.jpg",
  "mocha-angel-pie": "https://bakinggreatbread.blog/wp-content/uploads/2023/10/d42ac36a6091c134254580b5fdc6fbdb.jpg",
  "cardamom-cinnamon-rolls-yudane": "/lovable-uploads/7baba166-3864-4e61-aacb-d26d3b0db10b.png",
  
  // SCONES
  "blueberry-lemon-scones": "https://bakinggreatbread.blog/wp-content/uploads/2025/05/495571415_10235709364576315_7915392766389904392_n.jpg",
  
  // ROLLS/BUNS
  "brioche-hamburger-buns": "/lovable-uploads/1a0c34fd-69be-42d0-8dc6-1e4cecc5f1ae.png",
  "buttermilk-potato-rolls": "https://bakinggreatbread.blog/wp-content/uploads/2023/10/IMG_7806.png",
  "hot-cross-buns": "https://bakinggreatbread.blog/wp-content/uploads/2024/01/2A65D6F2-40DC-4045-83B6-B4C0A1F82697_Original.jpg",
  "hot-dog-buns": "/lovable-uploads/d20be4b4-50d3-4390-aa14-133b1aa80872.png",
  "spring-herb-rolls": "/lovable-uploads/6300d418-e64d-4a40-a868-b8bdf5c5c522.png",
  
  // SPECIALTY/SAVORY
  "cheddar-chive-biscuits": "/lovable-uploads/3b52b71d-ce38-4980-9964-91a64f30e26d.png",
  "jalapeno-cheddar-cornbread": "/lovable-uploads/92bf5337-70cc-4019-a7a1-4556c35ba5f8.png",
  "caramelized-onion-gruyere-fougasse": "https://bakinggreatbread.blog/wp-content/uploads/2025/02/475992172_1777767306347357_602858855922001730_n.jpg",
  "sun-dried-tomato-feta-bread": "/lovable-uploads/938a48a4-da57-4b7f-a31f-716a0493f585.png",
  "rosemary-garlic-parmesan-loaf": "/lovable-uploads/9b1f8351-f0df-4573-8fe1-fea3a1568962.png",
  
  // HOLIDAY BREADS
  "hanukkah-challah": "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_3677.jpg",
  "special-round-challah": "/lovable-uploads/39d28f2a-71e4-4711-8c5e-6d0542d82c1b.png",
  "easter-paska": "/lovable-uploads/6eded5fa-0dd5-4b7b-b7fc-108afbc3f96e.png",
  "holiday-star-cinnamon-bread": "/lovable-uploads/2f3f1e90-1a12-4b8a-bd83-8e8b8f95c7e7.png"
};

// Fallback images:
const fallbackImages = [
  "https://bakinggreatbread.blog/wp-content/uploads/2018/05/fd2ec99d-a06b-4f87-b71f-63c8542c458d.jpeg",
  "https://bakinggreatbread.blog/wp-content/uploads/2023/06/img_2890.jpg",
  "https://bakinggreatbread.blog/wp-content/uploads/2018/07/img_6393.jpg",
  "https://bakinggreatbread.blog/wp-content/uploads/2022/08/sourdough-starter-risen-in-a-jar.jpg"
];

export function getRecipeImage(slug: string, imageUrl?: string | null): string {
  console.log('üîç getRecipeImage DEBUG:', { slug, imageUrl });
  
  // CRITICAL: For problematic recipes, ALWAYS use mapping first
  const problematicRecipes = ['spiced-holiday-bread', 'nutty-whole-grain-sourdough', 'spiced-chocolate-bread', 'basic-sourdough-loaf', 'apple-cider-bread', 'henrys-whole-wheat-sourdough-recipe', 'holiday-star-cinnamon-bread'];
  
  if (problematicRecipes.includes(slug) && recipeImageMapping[slug]) {
    console.log('‚úÖ FORCING mapping URL for problematic recipe', slug, ':', recipeImageMapping[slug]);
    return recipeImageMapping[slug];
  }
  
  // Skip staging URLs - prioritize mapping over broken staging links
  const isStagingUrl = imageUrl && imageUrl.includes('wpcomstaging.com');
  
  // Check our mapping first (for staging URLs) or if no imageUrl
  if (isStagingUrl || !imageUrl || imageUrl.trim() === "") {
    if (recipeImageMapping[slug]) {
      console.log('‚úÖ Using mapping URL for', slug, ':', recipeImageMapping[slug]);
      return recipeImageMapping[slug];
    }
  }
  
  // Use direct image_url only if it's not a staging URL
  if (imageUrl && imageUrl.trim() !== "" && !isStagingUrl) {
    console.log('‚úÖ Using direct URL for', slug, ':', imageUrl);
    return imageUrl;
  }
  
  // Finally use a fallback image
  const fallbackIndex = Math.abs(slug.split('').reduce((a, b) => a + b.charCodeAt(0), 0)) % fallbackImages.length;
  const fallbackUrl = fallbackImages[fallbackIndex];
  console.log('‚ö†Ô∏è Using fallback URL for', slug, ':', fallbackUrl);
  return fallbackUrl;
}